<!DOCTYPE html>
{% load static %}
<html>
    <head>
<meta name="viewport" content="width=device-width" />




        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
          <script src="http://code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js"></script>
          <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
        <link rel="icon" type="image/png" href="/static/favicon.png" />
        <title>{{settings.title}}</title>
        <meta name="description" content="{{settings.meta_description}}"/>
        <meta name="keywords" content="{{settings.keywords}}"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="static/sf-webfont.css">
        <link href="static/open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet">
        <link href="static/js/jquery-typeahead/src/jquery.typeahead.css" rel="stylesheet">
        <script src="static/js/jquery-typeahead/src/jquery.typeahead.js"></script>
        <script src="/static/js/notify.js"></script>
        <script src="/static/nicescroll/jquery.nicescroll.js"></script>
        <script type="text/javascript">
           window.onCityChosen = [];
        </script>
        <script src="https://api-maps.yandex.ru/1.1/index.xml" type="text/javascript"></script>
        <script src="static/js/jquery.maskedinput/src/jquery.maskedinput.js" type="text/javascript"></script>




    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

    <!--
          <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

        <link rel="stylesheet" type="text/css" href="static/css.css" >
        <link rel="stylesheet" type="text/css" href="static/mobile.css" >

	<meta name="yandex-verification" content="54883a35452f8514" />
        <script>
          window.BASE_URL = "{{settings.site_url}}";
          window.MOBILE_URL = "{{settings.mobile_site_url}}";
          function goFull() {
            setCookie("PREFER_FULL", true);
            document.Location = window.BASE_URL;
          }

          function goMobile() {
            deleteCookie("PREFER_FULL");
            document.Location = window.MOBILE_URL;
          }


function isTouchDevice(){
    return true == ("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch);
}

            window.BASE_COST={{settings.cost}};
           function formDate(day) {
                if (!day) day = 0;
                var date = new Date(new Date().getTime() + 24*60*60*1000*day);
                return((date.getDate()) + '.' +(date.getMonth() + 1))+ '.' +  date.getFullYear()
            }



        $(document).ready(function() {
		if (false && !isTouchDevice()) {
		$("#shops-list").niceScroll({
			'autohidemode':false,
			'touchbehaviour':true
		});
		$('#float-city-selector .right').niceScroll({
			'autohidemode':false,
			'touchbehaviour':true
});
} else {

		$("#shops-list").addClass('overflow');
		$('#float-city-selector .right').addClass('overflow');
}
        });
        </script>
        <script>
      /*
        {% for c in cities %}
          {{c.name}}
        {% endfor %}
        */
        window.cities = {

        {% for c in cities.all|dictsort:"order" %}
            '{{c.name}}':{
                'x':'{{c.x}}',
                'y':'{{c.y}}',
                'target':'{{c.target}}',
                'name':'{{c.name}}',
                'order':'{{c.order}}',
                'delivery':'{{c.has_delivery}}',
                'towns':[{% for s in c.towns.all|dictsort:"order" %}
                   {
                       'name':'{{s.name}}',
                       'x':'{{s.x}}',
                       'y':'{{s.y}}',
                        'shops':[
                           {% for ts in s.shops.all %}
                           {
                               'name':'{{ts.name}}',
                               'address':'{{ts.address}}',
                               'x':'{{ts.x}}',
                               'y':'{{ts.y}}',
                               'title':'{{ts.title}}',
                               'phone':'{{ts.phone}}',
                               'metro':'{{ts.metro}}'
                           },
                         {% endfor %}
                         ]
                   },
                {% endfor %}
              ],
                'shops':[{% for s in c.shops.all %}
                   {
                       'name':'{{s.name}}',
                       'address':'{{s.address}}',
                       'x':'{{s.x}}',
                       'y':'{{s.y}}',
                       'title':'{{s.title}}',
                       'phone':'{{s.phone}}',
                       'metro':'{{ts.metro}}'
                   },
                {% endfor %}
                ]
        },
        {% endfor %}
        };


        window.towns = [
        {% for c in towns.all|dictsort:"order" %} {
                'x':'{{c.x}}',
                'y':'{{c.y}}',
                'name':'{{c.name}}',
                'shops':[
                  {% for s in c.shops.all %}
                  {
                       'name':'{{s.name}}',
                       'address':'{{s.address}}',
                       'x':'{{s.x}}',
                       'y':'{{s.y}}',
                       'title':'{{s.title}}',
                       'phone':'{{s.phone}}'
                  },
                  {% endfor %}
                ]
              },
        {% endfor %}
        ];
        </script>
    </head>
    <body id="mobile" class="mobile">
        <div id="right-border">
        </div>
        <div id="left-border">
        </div>

      <style type="text/css">
      a.black {
        color:rgb(33, 37, 41);
      }

      button {
        outline: none!important;
      }

      .m-form-button a:hover {
        text-decoration: none;
      }
      .m-form-button {
        width: 156px;
        height: 42px;
        margin: 0 auto;
        padding-right: 10px;
      }
      body#mobile {
        padding-left: 15px;
        padding-right: 15px;
      }

      #mobile .m-form-button a.upper {
        padding-top: 1.1em;
      }

      #mobile .m-form-button a.lower {
        padding-top: 0.5em;
      }

      #mobile .m-form-button a {
        background-size: 100% 100%;
        width: 100%;
        height: 100%;
        color: #fff;
        font-size: 1.2em;
        display: inline-block;
      }

      .hovering:hover .unhover {
          display: none;
      }

      .hovering:hover .hover {
          display: inline-block;
      }

      .hovering .unhover {
          display: inline-block;
      }

      .hovering .hover {
          display: none;
      }

      #mobile {
          position:relative;
          margin-top:0px;
      }

        .mobile .navbar .go-to-full {
        }
        .mobile .navbar {
          z-index: 1060;
          min-width: 306px;
        }

        .mobile .navbar .show ul {
          min-height: 100%;
          width: 100%;
          position: fixed;
          top: 61px;
          background-color: #fff;
          left: 0px;
          min-height: 100%;
          padding: 10px;
        }

        #mobile > .navbar >  .navbar-collapse {
          margin-top: 10px;
        }
        .mobile .navbar .pink-border{
          border-bottom: 5px solid #ee5c72;
width: 100%;
top: 39px;
position: absolute;
right: 0px;
left: 0px;
        }

        .mobile .navbar .nav-item.row {
          padding: 10px 0px;
        }

        .mobile .navbar-light .navbar-toggler-icon {
          background-image: url("/static/navbar.png");
        }
        .mobile .navbar-light .navbar-toggler {
          border-color:transparent;
        }

        body {
        }
      </style>

<style type="text/css">


  div .delivery {
text-transform: uppercase;
font-weight: bold;
font-size: 10px;
text-align: center;
line-height: 200%;
    }

  .delivery button {
    background: transparent;
  }

  .delivery-free button {
    background: transparent;
  }

  button.navbar-toggler[aria-expanded=false] > .open {
    display: inline-block;
  }
  button.navbar-toggler[aria-expanded=false] > .close {
    display: none;
  }
  button.navbar-toggler[aria-expanded=true] > .open {
    display: none;
  }
  button.navbar-toggler[aria-expanded=true] > .close {
    display: inline-block;
    font-size: 28px;
margin-top: -3px;
color: #ee5c72;
  }

    .modal-dialog {
      pointer-events: auto;
    }

    .delivery {
      text-align: center;
      font-size: 11px;
    }
    body  {
      max-width: 540px;
      margin: 0 auto;
      min-width: 306px;
    }

    #ask-form div {
      box-shadow: initial!important ;
      background-color: transparent;
    }
  </style>

<nav class="navbar fixed-top x-navbar-expand-lg navbar-light bg-light">
  <hr class="pink-border" />
  <a class="navbar-brand" href="#" onclick="$('.modal').modal('hide');">
                    <img src="static/mobile/logo.png" id="logo"></a>
  </a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="open navbar-toggler-icon"></span>
    <span class="close oi oi-x" title="icon name" aria-hidden="true"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto"
        style="width:100%"
      >
        <li class="nav-item row">
            <span class="col-10">Регион: <span class="city_name">...</span></span>
            <button class="col-2" data-dismiss="modal" data-target="#choose_city_modal" onclick="$('#choose_city_modal').modal('show');" >
                <span class="oi oi-chevron-right" title="icon name" aria-hidden="true"></span>
            </button>
        </li>

        <li class="nav-item row">
            <span class="col-10">Оформить заказ с доставкой</span>
            <button class="col-2" data-dismiss="modal" data-target="#order-form-mobile" onclick="$('#order-form-mobile').modal('show');">
                <span class="oi oi-chevron-right" title="icon name" aria-hidden="true"></span>
            </button>
        </li>

        <li class="nav-item row">
            <span class="col-10">Найти аптеку</span>
            <button class="col-2" data-dismiss="modal" data-target="#">
                <span onclick="return;" class="oi oi-chevron-right" title="icon name" aria-hidden="true"></span>
            </button>
        </li>
                    {% for page in pages|dictsort:"order" %}
                        {% if page.menu_title %}
                          <li class="nav-item">
                            <a class="nav-link" href="#anchor-{{page.slug}}">{{page.menu_title|title}}</a>
                          </li>
                        {% endif %}
                    {% endfor %}

                          <li class="nav-item">
                            <a class="nav-link" href="#find-shop">Где купить?</a>
                          </li>

      <li class="nav-item" style="position:absolute; bottom:140px;">
       <br />
       <span style="font-size:24px"><a href="callto:88002224272" style="color:rgba(0,0,0,.5);">8 800 222-42-72</a></span>
       <br />
       <small style="font-size:10px;">
         Горячая линия препарата. Звонок по РФ - бесплатно
       </small>
      </li>

      <li class="nav-item go-to-full" style="position:absolute; bottom:66px;">
       <hr />
       <span style="color:#000; font-size:24px"> <a style="color:rgba(0,0,0,.5);" href="#" onclick="goFull();"> Открыть полную версию сайта</a></span>

      </li>
    </ul>
  </div>
</nav>

<!--
        <div id="head">
            <span id="menu">
                <ul>
                    <li><a href="#"><img src="static/./logo.png" id="logo"></a></li>
                    {% for page in pages|dictsort:"order" %}
                        {% if page.menu_title %}
                            <li><a href="#{{page.slug}}">{{page.menu_title}}</a></li>
                        {% endif %}
                    {% endfor %}
                    <li class="nowrap">
                        <span onclick="$('.float-city-selector').show();" class="select-city">
                           <span style="color:#2c4f8a">▼</span>
                           <a href="#"><span class="selector">Москва</span></a>
                        </span>
                    </li>
                </ul>
                <img
                 style="position:absolute; right:0px; top:-7px; x-width:190px;"
                 src="{{ settings.phone.url }}" />
            </span>
        </div>
      -->


        <script type="text/javascript">
           function choose_shop(shop, index) {
                /*
                map.streetView.setVisible(false);
                var x = toDot(shop.x);
                var y = toDot(shop.y);
                var name = shop.name;
                var title = shop.title;
                var phone = shop.phone;
                if (window.map_marker !=null) {
choose_city_modal
                }
                var position = {lat:x,lng:y};
                map.panTo(position);
                map.setZoom(17);

                infowindow.open(map, map_marker[index]);
                map.panTo(mpos);
                */
           }



           function choose_city(city, show_confirmation) {
             $('#choose_city_modal').modal('hide');

               //if (typeof {{settings.yandex_counter_id}} != 'undefined') {
               //     {{settings.yandex_counter_id}}.reachGoal(cities[city].target);
               //}


                if (show_confirmation == true) {
                      $('#city_confirmation').css('display','flex');
                }

                window.lc.setItem("ChosenName", city);

               $('.city_name').html(city);
               $('input.city_name').val(city);
                /*
               $('input.input.city').val(city);
                var x = cities[city].x;
                var y = cities[city].y;


                $('.float-city-selector').hide();
                $('.select-city .selector').text(city);

                var items = '';
                */
                if (cities[city].delivery == 'True') {
                    $('.delivery.free').show();
                    $('.delivery.non-free').hide();
                } else {
                    $('.delivery.free').hide();
                    $('.delivery.non-free').show();
                }

                /*
                map.streetView.setVisible(false);
                map.setZoom(7);
                map.panTo({lat:toDot(x),lng:toDot(y)});

                if (typeof map_marker == 'undefined' || map_marker == null) var map_marker = [];
                for (var k = 0; k<map_marker.length; k++) {
                    map_marker[k].setMap(null);
                }
                map_marker = [];

                var shops = cities[city].shops.sort(function(a,b) {
                    if (a.name<b.name) {
                        return -1;
                    } else if (a.name>b.name) {
                        return 1;
                    }
                    return 0;
                } );
                $('#shops-list').html('');
                for (var i =0; i<shops.length; i++) {

                    let shop = shops[i];
                    let position = {lat:toDot(shop.x),lng:toDot(shop.y)};
                    //map.panTo(position);
                    map_marker.push(new google.maps.Marker({
                        position: position,
                        map: map,
                        title: shop.name+' '
                    }));

                    let infowindow = new google.maps.InfoWindow({
                        content: "<div><h2 style='color:#47bae8;'>"+shop.title+"</h2>"
                        +"<div>"+shop.name+"</br>"+shop.phone+"</div></div>"
                    });
                    let index = map_marker.length-1;
                    let x = toDot(shop.x);
                    let y = toDot(shop.y);
                    let mpos = {lat:x, lng:y};

                    map_marker[map_marker.length-1].addListener('click', function() {
                        infowindow.open(map, map_marker[index]);
                        map.panTo(mpos);
                    });


                    var item=$('<li style="cursor:pointer;" onclick="{{settings.yandex_counter_id}}.reachGoal(\''+cities[city].target+'\');  choose_shop(cities[\''+city+'\'].shops['+i+'],'+i+')">'+shops[i].name+'</li>');
                    item.click(function() {
                        infowindow.open(map, map_marker[index]);
                        map.panTo(mpos);

                    });
                    items+=item;
                    $('#shops-list').append(item);
                }
                    */



                    for (var i =0; i<window.onCityChosen.length; i++) { onCityChosen[i](city); }


           }
        </script>
        <div  class="bg order-done" style=""> </div>
        <div class="order-done" id="order-done">
        <div onclick="$('.order-done').hide();" style="position:fixed; width:100%; height:100%; z-index:0; left:0px; top:0px; cursor:pointer;"></div>
                <script>
                </script>
                <div class="inner">
                    <img src="static/akto-box-photo.png" />
                    <div class="holder">
                        <div class="left">
                            <span class="title">
                                <!--
                                -->
                            {{settings.form_title}}
                            </span>
                            <br/>
                            <span class="cost">
                                <span><script>document.write(BASE_COST);</script></span>₽
                            </span>
                            <br/>
                            <span class="count">
                                <a onclick="order_form.minus();" class="minus">
                                    -
                                </a>
                                <span>
                                    <span class="quantity">1</span> уп.
                                </span>
                                <a onclick="order_form.plus();" class="plus">
                                    +
                                </a>
                            </span>
                            <br/>
                            <span class="total">
                                Итого: <span class="cost"><span class="q"><script>document.write(BASE_COST);</script></span> руб.</span>
                            </span>
                            <span class="info">
                                {{settings.const_info}}
                            </span>
                        </div>
                        <div class="right step2" style="display:none;">
                            <h4>
                                <!--
                                -->
                                {{settings.form_header_1}}
                            </h4>
                            <div class="form">
                            <hr />
                            <br/>
                            <br/>
                            <script type="text/javascript">
                                function appendClear(val) {
                                    $('.city_list_holder').html('');
                                    $('#order-done input.city').val(val);
                                    choose_city(val);
                                }

function ahead(val) {
    if (val.length<=1) {
        return '';
    }
    result = '';
    var cities = Object.keys(window.cities);
    for (var i = 0; i<cities.length; i++) {
        if (cities[i].toLowerCase().indexOf(val.toLowerCase())!=-1) {
            result+="<li onclick='appendClear($(this).html())'>"+cities[i]+"</li>";
        }
    }
    result="<ul>"+result+"</ul>"
    $('.city_list_holder').html(result);
    return result;
}
                            </script>
                            <input  class="input city" name="city" onkeyup="ahead($(this).val())" type="text" placeholder="Населенный пункт" />
                            <div class="city_list_holder">
                            </div>
                            <br/>
                            <input  class="street" name="time" type="text" placeholder="Улица" />
                            <br/>
                            <input  class="house" name="house" type="text" placeholder="Дом" />
                            <input  class="flat" name="flat" type="text" placeholder="Квартира" />
                            <br />
                            <div style="color:red; margin:20px; display:none;" class="error"></div>
                            <br/>
                            <a onclick="order_form.step2(false);" href="javascript:void(0);">Отменить</a>
                            <a onclick="order_form.step2(true); " href="javascript:void(0);">Отправить</a>
                            </div>
                        </div>
                        <div class="right step1">
                            <h4>
                                <!--
                                -->
                                {{settings.form_header_2}}
                            </h4>
                            <div class="form">
                            <hr />
                            <input  class="name" name="name" type="text" placeholder="{{settings.name_caption}}*" />
                            <br/>
                            <input  class="phone" name="phone" type="text" placeholder="{{settings.phone_caption}}*" />
                            <br/>
                            <input  class="email" name="email" type="text" placeholder="{{settings.mail_caption}}" />
                            <div>
                            * - Поля, обязательные для заполнения
                            </div>
                            <br/>
                            <br/>
                            <br/>
                            <div style="color:red; margin:20px; display:none;" class="error"></div>
                            <a onclick="order_form.step1(false);" href="javascript:void(0);">Отменить</a>
                            <a onclick="order_form.step1(true);" href="javascript:void(0);">Далее</a>
                            </div>

                        </div>
                        <div class="right step3" style="display:none;">
                            <h4 style="">
                                <!--
                                -->
                                {{settings.form_header_3}}
                                <br/>
                                <br/>
</h4>
                            <span style="
                            display:block;
                            padding-right:40px;
    x-max-width: 600px;
    x-position: relative;
    x-height: 200px;
    x-padding-top: 10px!important;
    x-display: inline-block;
    ">
                                {{settings.order_complete|linebreaksbr}}

</span>
                            <div class="form">
                                <div class="when date">
                                    <a style="width:159px;" alt="0" onclick="$('.form .date a').removeClass('active'); $(this).addClass('active');"
                                     href="javascript:void(0);">Сегодня</a>
                                    <a  style="width:113px;" alt="1" onclick="$('.form .date a').removeClass('active'); $(this).addClass('active');" href="javascript:void(0);">Завтра</a>
                                    <a  style="width:174px;" alt="2" onclick="$('.form .date a').removeClass('active'); $(this).addClass('active');" href="javascript:void(0);">Послезавтра</a>
                                </div>
                            <input  class="time" name="time" type="text" placeholder="Укажите время" />
                            <div style="color:red; margin:20px; display:none;" class="error"></div>
                            <br/>
                            <a style="width:225px;" onclick="order_form.step3(false);" href="javascript:void(0);">Назад</a>
                            <a style="width:225px;" onclick="order_form.step3(true);"  href="javascript:void(0);">Подтвердить</a>
                            </div>

                        </div>
                    </div>
                </div>
        </div>

        <div class="float-city-selector bg" style="">
        </div>
        <div class="float-city-selector" id="float-city-selector">
                <div class="holder">
                    <div class="left">
                            <img src="static/akto-box-photo.png" />
                    </div>
                    <div class="right">
                        <div class="title">
                            Ваш регион: <span class="city_name">Москва
                            </span>
                            <br />
                            <br />
                            Выберите ваш регион из списка, если мы определили его неправильно
                        </div>
                        <div class="city-list">
                            {% for city in cities %}
                                <span onclick="choose_city('{{city.name}}');" >
                                    {{ city.name }}
                                </span>
                            {% endfor %}
                        </div>
                        </div>
                    </div>
		    <div class="clear"></div>
                </div>
        </div>
        <div class="clear"></div>

        <style>
          .anchor-holder {
            position: relative;
          }
          .anchor-holder .anchor {
            position: absolute;
            x-top:60px;
          }

        </style>


        {% for page in pages|dictsort:"order" %}
        <div class="anchor-holder">
          <a name="anchor-{{page.slug}}" class="{{page.slug}} anchor"> <!--{{page.template}}--> </a>
        </div>
            {% include page.template %}
        {% endfor %}

        {% include 'order_form.html' %}
        {% include 'choose_city_modal.html' %}



        <!--
        <script async defer
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAi3fsw5CM1n-2hPQr0oSTlxoVER0kb_1g&callback=initMap">
        </script>
      -->

    <script type="text/javascript">

     function prepareRegions(q) {
        var result =[];
        for (i in cities) {
          var city = cities[i];
          result.push(city);
          //item = '<a href="#" data-name="'+city.name+'" onclick="choose_city(\''+city.name+'\');">'+city.name+'</a>';
        }
        result = result.sort(function(a,b) {
          if (a.name.indexOf(q) !=-1) return -1;
          if (b.name.indexOf(q) !=-1) return 1;
          return b.order - a.order;
        });
        return result;
     }

    function toSemi(s) {
        return Number(s);
        //return Number(s.replace('.',','));

    }
    function toDot(s) {

        return Number((''+s).replace(',','.'));
    }
    /*
    var map;
    window.map = map;
    window.map_marker = null;
    var map_inited = false;
    function initMap() {
        if (!map_inited) {

            var x = 0;
            var y = 0;
            try {
                if (localStorage.getItem('ChosenName')!=null) {
                    x = toDot(cities[localStorage.getItem('ChosenName')].x);
                    y = toDot(cities[localStorage.getItem('ChosenName')].y);
                } else {
                }
            } catch(e) {

            }
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: x, lng: y},
                zoom: 8,
                zoomConrol: true
            });
            map_inited = true;
        }

    }
    */



    $('document').ready(function() {
        window.city_is_just_detected  = false;
        //YMaps.ready(function() {
              //window.ymaps = YMaps;
              var c = window.lc.getItem('ChosenName');
              if (!c) {
                window.city_is_just_detected  = true;
                c = YMaps.location.city;
                if (typeof c == 'undefined') {
                    c = YMaps.location.region;
                }
              }

              if (typeof c == 'undefined') {
                c = Object.keys(window.cities)[0];
              }



              if (typeof window.cities[c]=='undefined' && (typeof YMaps.location.region!='undefined' || typeof YMaps.location.city!='undefined')) {
                   window.cities[c] = {
                       x:toSemi(YMaps.location.latitude),
                       y:toSemi(YMaps.location.longitude),
                       delivery:false,
                       name:c,
                       shops:[]
                  }
              }

              //initMap();
              choose_city(c,window.city_is_just_detected);
        //});
    });
    </script>


        <script>



try {
  window.lc = localStorage;
  localStorage.setItem('test','test');
} catch(e) {
  var lc = function() {
    this.data = {};
    this.setItem =  function(k,v) {this.data[k]=v;}
    this.getItem =  function(k) { return this.data[k];}
  }
  window.lc = new lc();
}


            switchGal = function(obj) {
                var el = $(obj);
                if (!$(el).parent().hasClass('active')) {
                    $(el).parent().parent().find('.active').removeClass('active');
                    $(el).parent().addClass('active')
                }

            }
            $('#page-faq .list li h5').click(function(){
                switchGal(this);
                //console.log(this);
            });
            $('#page-faq .list li').first().addClass('active');
        </script>
        <script type="text/javascript">

            /*
                if (navigator.geolocation) {
                          navigator.geolocation.getCurrentPosition(function(position) {
                            var pos = {
                              lat: position.coords.latitude,
                              lng: position.coords.longitude
                            };

                            infoWindow.setPosition(pos);
                            infoWindow.setContent('Location found.');
                            map.setCenter(pos);
                          }, function() {
                            handleLocationError(true, infoWindow, map.getCenter());
                          });
                        } else {
                          // Browser doesn't support Geolocation
                          //handleLocationError(false, infoWindow, map.getCenter());
                        }
*/
         function showForm() {
             $('.order-done').show();

         }

function deleteCookie(name) {
  setCookie(name, "", {
    expires: -1
  })
}

         function setCookie(name, value, options) {
  options = options || {};

  var expires = options.expires;

  if (typeof expires == "number" && expires) {
    var d = new Date();
    d.setTime(d.getTime() + expires * 1000);
    expires = options.expires = d;
  }
  if (expires && expires.toUTCString) {
    options.expires = expires.toUTCString();
  }

  value = encodeURIComponent(value);

  var updatedCookie = name + "=" + value;

  for (var propName in options) {
    updatedCookie += "; " + propName;
    var propValue = options[propName];
    if (propValue !== true) {
      updatedCookie += "=" + propValue;
    }
  }

  document.cookie = updatedCookie;
}
        function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');
function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    }
});

        </script>
    <script>
$('.float-city-selector.bg').click(function() {
    $('.float-city-selector').hide();
});

$('#order-done').click(function(e) {
      if (e.target !== this)
        return;
    $('.order-done').hide();
});

$('.order-done.bg').click(function() {
    $('.order-done').hide();
});
        $(window).scroll(function(){
            $('#head').css('margin-left',-parseInt($(window).scrollLeft()));
            $('#float-city-selector').css('margin-left',-parseInt($(window).scrollLeft()));
            $('#float-city-selector').css('top',parseInt($(window).scrollTop()));
            $('#oranggal').css('margin-left',-parseInt($(window).scrollLeft()));
        });


    </script>
    <script>

    </script>
    {{settings.counters|safe}}

<script type="text/javascript">
  $('body').ready(function(){
    var carousels = $('.carousel');
    carousels.each(function(i,carousel) {
      if ($(carousel).hasClass('ignore-fit')) {
        return;
      }
      var max = 0;
      var items = $(carousel).find('.carousel-item');
      items.each(function(k,item) {
            if ($(item).hasClass('ignore-fit-item')) {
              return;
            }
           if ($(item).height() > max) {
              max = $(item).height();
        }
      });
      max+=10;
      $(carousel).first('.adjust').css('min-height',max);

      items.each(function(k,item) {
           $(item).css('min-height',max);
      });
    });
  });

 openYandex = function(q) {
	 q = encodeURI(q);
   //url = https://yandex.ru/maps/213/moscow/?mode=search&text=%D1%84%D1%8B&sll=37.620393%2C55.753960&sspn=2.018738%2C0.738072
   var web_url = "https://yandex.ru/maps/?mode=search&text="; //%D1%84%D1%8B
   setTimeout(function () {
     window.location = web_url + q;
   }, 25);
   window.location = "yandexmaps://maps.yandex.ru/?mode=search&text=";
 }

   $(".carousel").each(function(index) {
      $(this).on("swipeleft", function() {
        $(this).carousel('next');
      });
   });

   $(".carousel").each(function(index) {
      $(this).on("swiperight", function() {
        $(this).carousel('prev');
      });
   });

    $('a[href^="#"]').bind('click vclick', function (ev) {
        location.hash = $(this).attr('href');
        return false;
    });

</script>
<style>
.ui-textinput-clear-button {
  display: none;
}
.nopadding {
  padding:0;
}
</style>

    </body>
</html>
